{#
/**
 * @file
 * Theme for the XML translation request file.
 *
 * Variables:
 * - drupal_version: The current Drupal version (optional)
 * - module_version: The version of the CDT module (optional)
 * - producer_date: The date of the request (optional)
 * - transaction_identifier: The ID of the transaction (optional)
 * - transaction_code: The code of the transaction (optional)
 * - translations: The list of items to translate
 *   - source_reference: The reference to the source (optional)
 *   - fields: The list of fields to translate
 *     - index_type: The type of the content, like 'node', 'taxonomy' etc.
 *     - instance_id: The ID of the content, like Node ID.
 *     - res_name: The name of the resource
 *     - res_type: The type of the resource
 *     - res_max_size: The maximum size of the resource (optional)
 *     - res_label: The label of the resource
 *     - content: The content to translate
 * - total_character_length: The total character length of the translation (optional)
 *
 * @see template_preprocess_translation_request_xml_file()
 */
#}
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Transaction xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="//static.cdt.europa.eu/webtranslations/schemas/Drupal-Translation-V8-2.xsd">
  <TransactionHeader xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <SenderDetails {% if drupal_version %}drupalVersion="{{ drupal_version }}"{% endif %}
                   {% if module_version %}moduleVersion="{{ module_version }}"{% endif %}>
      {% if producer_date %}<ProducerDateTime>{{ producer_date|date('c') }}</ProducerDateTime>{% endif %}
    </SenderDetails>
  </TransactionHeader>
  {% if transaction_identifier %}<TransactionIdentifier>{{ transaction_identifier }}</TransactionIdentifier>{% endif %}
  {% if transaction_code %}<TransactionCode>{{ transaction_code }}</TransactionCode>{% endif %}
  <TransactionData>
    <TranslationDetails>
      {% for translation in translations %}
        <Translation>
          <PreviewLink><![CDATA[NO PREVIEW LINK]]></PreviewLink>
          <SourceReference>{{ translation.source_reference }}</SourceReference>
          {% for field in translation.fields %}
            <StaticContent
              indexType="{{ field.index_type }}"
              instanceId="{{ field.instance_id }}"
              resName="{{ field.res_name }}"
              resType="{{ field.res_type }}"
              {% if field.res_max_size %}resMaxSize="{{ field.res_max_size }}"{% endif %}
              resLabel="{{ field.res_label }}">
              <![CDATA[{{ field.content }}]]>
            </StaticContent>
          {% endfor %}
        </Translation>
      {% endfor %}
      {% if total_character_length %}<TotalCharacterLength>{{ total_character_length }}</TotalCharacterLength>{% endif %}
    </TranslationDetails>
  </TransactionData>

</Transaction>
