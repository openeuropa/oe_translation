services:
  oe_translation_cdt.api_client:
    class: OpenEuropa\CdtClient\ApiClient
    arguments:
      - '@http_client'
      - '@psr17.server_request_factory'
      - '@psr17.stream_factory'
      - '@oe_translation_cdt.psr17.uri_factory'
      - '%cdt.client_configuration%'

  oe_translation_cdt.api_wrapper:
    class: Drupal\oe_translation_cdt\Api\CdtApiWrapper
    arguments: ['@oe_translation_cdt.api_client', '@http_client', '@state', '@datetime.time']

  oe_translation_cdt.xml_formatter:
    class: Drupal\oe_translation_cdt\ContentFormatter\XmlFormatter
    arguments: ['@renderer', '@entity_type.manager', '@datetime.time']

  oe_translation_cdt.psr17.uri_factory:
    class: GuzzleHttp\Psr7\HttpFactory
    public: false
  Psr\Http\Message\UriFactoryInterface: '@oe_translation_cdt.psr17.uri_factory'

  oe_translation_cdt.translation_request_mapper:
    class: Drupal\oe_translation_cdt\Mapper\TranslationRequestMapper
    arguments: ['@oe_translation_cdt.xml_formatter']

  oe_translation_cdt.translation_request_updater:
    class: Drupal\oe_translation_cdt\TranslationRequestUpdater
